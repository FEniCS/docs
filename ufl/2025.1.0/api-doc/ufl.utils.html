<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ufl.utils package &#8212; Unified Form Language (UFL) 2025.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <script src="../_static/documentation_options.js?v=65f7d7c4"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Release notes" href="../releases.html" />
    <link rel="prev" title="ufl.formatting package" href="ufl.formatting.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="ufl-utils-package">
<h1>ufl.utils package<a class="headerlink" href="#ufl-utils-package" title="Link to this heading">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading">¶</a></h2>
</section>
<section id="module-ufl.utils.counted">
<span id="ufl-utils-counted-module"></span><h2>ufl.utils.counted module<a class="headerlink" href="#module-ufl.utils.counted" title="Link to this heading">¶</a></h2>
<p>Mixin class for types with a global unique counter attached to each object.</p>
<dl class="py class">
<dt class="sig sig-object py" id="ufl.utils.counted.Counted">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ufl.utils.counted.</span></span><span class="sig-name descname"><span class="pre">Counted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counted_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/counted.html#Counted"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.counted.Counted" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Mixin class for globally counted objects.</p>
<dl class="py method">
<dt class="sig sig-object py" id="ufl.utils.counted.Counted.count">
<span class="sig-name descname"><span class="pre">count</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/counted.html#Counted.count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.counted.Counted.count" title="Link to this definition">¶</a></dt>
<dd><p>Get count.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-ufl.utils.formatting">
<span id="ufl-utils-formatting-module"></span><h2>ufl.utils.formatting module<a class="headerlink" href="#module-ufl.utils.formatting" title="Link to this heading">¶</a></h2>
<p>Various string formatting utilities.</p>
<dl class="py function">
<dt class="sig sig-object py" id="ufl.utils.formatting.camel2underscore">
<span class="sig-prename descclassname"><span class="pre">ufl.utils.formatting.</span></span><span class="sig-name descname"><span class="pre">camel2underscore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/formatting.html#camel2underscore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.formatting.camel2underscore" title="Link to this definition">¶</a></dt>
<dd><p>Convert a CamelCaps string to underscore_syntax.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ufl.utils.formatting.estr">
<span class="sig-prename descclassname"><span class="pre">ufl.utils.formatting.</span></span><span class="sig-name descname"><span class="pre">estr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">elements</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/formatting.html#estr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.formatting.estr" title="Link to this definition">¶</a></dt>
<dd><p>Format list of elements for printing.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ufl.utils.formatting.istr">
<span class="sig-prename descclassname"><span class="pre">ufl.utils.formatting.</span></span><span class="sig-name descname"><span class="pre">istr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/formatting.html#istr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.formatting.istr" title="Link to this definition">¶</a></dt>
<dd><p>Format object as string, inserting ? for None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ufl.utils.formatting.lstr">
<span class="sig-prename descclassname"><span class="pre">ufl.utils.formatting.</span></span><span class="sig-name descname"><span class="pre">lstr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/formatting.html#lstr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.formatting.lstr" title="Link to this definition">¶</a></dt>
<dd><p>Pretty-print list or tuple, invoking str() on items instead of repr() like str() does.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ufl.utils.formatting.tree_format">
<span class="sig-prename descclassname"><span class="pre">ufl.utils.formatting.</span></span><span class="sig-name descname"><span class="pre">tree_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expression</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indentation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parentheses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/formatting.html#tree_format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.formatting.tree_format" title="Link to this definition">¶</a></dt>
<dd><p>Tree format.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ufl.utils.formatting.tstr">
<span class="sig-prename descclassname"><span class="pre">ufl.utils.formatting.</span></span><span class="sig-name descname"><span class="pre">tstr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">80</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/formatting.html#tstr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.formatting.tstr" title="Link to this definition">¶</a></dt>
<dd><p>Pretty-print list of tuples of key-value pairs.</p>
</dd></dl>

</section>
<section id="module-ufl.utils.indexflattening">
<span id="ufl-utils-indexflattening-module"></span><h2>ufl.utils.indexflattening module<a class="headerlink" href="#module-ufl.utils.indexflattening" title="Link to this heading">¶</a></h2>
<p>Collection of utilities for mapping between multiindices and a flattened index space.</p>
<dl class="py function">
<dt class="sig sig-object py" id="ufl.utils.indexflattening.flatten_multiindex">
<span class="sig-prename descclassname"><span class="pre">ufl.utils.indexflattening.</span></span><span class="sig-name descname"><span class="pre">flatten_multiindex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ii</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strides</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/indexflattening.html#flatten_multiindex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.indexflattening.flatten_multiindex" title="Link to this definition">¶</a></dt>
<dd><p>Return the flat index corresponding to the given multiindex.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ufl.utils.indexflattening.shape_to_strides">
<span class="sig-prename descclassname"><span class="pre">ufl.utils.indexflattening.</span></span><span class="sig-name descname"><span class="pre">shape_to_strides</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sh</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/indexflattening.html#shape_to_strides"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.indexflattening.shape_to_strides" title="Link to this definition">¶</a></dt>
<dd><p>Return a tuple of strides given a shape tuple.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ufl.utils.indexflattening.unflatten_index">
<span class="sig-prename descclassname"><span class="pre">ufl.utils.indexflattening.</span></span><span class="sig-name descname"><span class="pre">unflatten_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strides</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/indexflattening.html#unflatten_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.indexflattening.unflatten_index" title="Link to this definition">¶</a></dt>
<dd><p>Return the multiindex corresponding to the given flat index.</p>
</dd></dl>

</section>
<section id="module-ufl.utils.sequences">
<span id="ufl-utils-sequences-module"></span><h2>ufl.utils.sequences module<a class="headerlink" href="#module-ufl.utils.sequences" title="Link to this heading">¶</a></h2>
<p>Various sequence manipulation utilities.</p>
<dl class="py function">
<dt class="sig sig-object py" id="ufl.utils.sequences.max_degree">
<span class="sig-prename descclassname"><span class="pre">ufl.utils.sequences.</span></span><span class="sig-name descname"><span class="pre">max_degree</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">degrees</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/sequences.html#max_degree"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.sequences.max_degree" title="Link to this definition">¶</a></dt>
<dd><p>Maximum degree for mixture of scalar and tuple degrees.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ufl.utils.sequences.product">
<span class="sig-prename descclassname"><span class="pre">ufl.utils.sequences.</span></span><span class="sig-name descname"><span class="pre">product</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sequence</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/sequences.html#product"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.sequences.product" title="Link to this definition">¶</a></dt>
<dd><p>Return the product of all elements in a sequence.</p>
</dd></dl>

</section>
<section id="module-ufl.utils.sorting">
<span id="ufl-utils-sorting-module"></span><h2>ufl.utils.sorting module<a class="headerlink" href="#module-ufl.utils.sorting" title="Link to this heading">¶</a></h2>
<p>Utilites for sorting.</p>
<dl class="py function">
<dt class="sig sig-object py" id="ufl.utils.sorting.canonicalize_metadata">
<span class="sig-prename descclassname"><span class="pre">ufl.utils.sorting.</span></span><span class="sig-name descname"><span class="pre">canonicalize_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/sorting.html#canonicalize_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.sorting.canonicalize_metadata" title="Link to this definition">¶</a></dt>
<dd><p>Assuming metadata to be a dict with string keys and builtin python types as values.</p>
<p>Transform dict to a tuple of (key, value) item tuples ordered by key,
with dict, list and tuple values converted the same way recursively.
Lists and tuples are converted to tuples. Other values are converted using str().
This is such that the end result can be hashed and sorted using regular &lt;,
because python 3 doesn’t allow e.g. (3 &lt; “auto”) which occurs regularly in metadata.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ufl.utils.sorting.sorted_by_count">
<span class="sig-prename descclassname"><span class="pre">ufl.utils.sorting.</span></span><span class="sig-name descname"><span class="pre">sorted_by_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seq</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/sorting.html#sorted_by_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.sorting.sorted_by_count" title="Link to this definition">¶</a></dt>
<dd><p>Sort a sequence by the item.count().</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ufl.utils.sorting.sorted_by_key">
<span class="sig-prename descclassname"><span class="pre">ufl.utils.sorting.</span></span><span class="sig-name descname"><span class="pre">sorted_by_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapping</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/sorting.html#sorted_by_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.sorting.sorted_by_key" title="Link to this definition">¶</a></dt>
<dd><p>Sort dict items by key, allowing different key types.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ufl.utils.sorting.topological_sorting">
<span class="sig-prename descclassname"><span class="pre">ufl.utils.sorting.</span></span><span class="sig-name descname"><span class="pre">topological_sorting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edges</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/sorting.html#topological_sorting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.sorting.topological_sorting" title="Link to this definition">¶</a></dt>
<dd><p>Return a topologically sorted list of the nodes.</p>
<p>Implemented algorithm from Wikipedia (<a class="reference external" href="http://en.wikipedia.org/wiki/Topological_sorting">http://en.wikipedia.org/wiki/Topological_sorting</a>).</p>
<p>No error for cyclic edges…</p>
</dd></dl>

</section>
<section id="module-ufl.utils.stacks">
<span id="ufl-utils-stacks-module"></span><h2>ufl.utils.stacks module<a class="headerlink" href="#module-ufl.utils.stacks" title="Link to this heading">¶</a></h2>
<p>Various utility data structures.</p>
<dl class="py class">
<dt class="sig sig-object py" id="ufl.utils.stacks.Stack">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ufl.utils.stacks.</span></span><span class="sig-name descname"><span class="pre">Stack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/stacks.html#Stack"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.stacks.Stack" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></p>
<p>A stack datastructure.</p>
<dl class="py method">
<dt class="sig sig-object py" id="ufl.utils.stacks.Stack.peek">
<span class="sig-name descname"><span class="pre">peek</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/stacks.html#Stack.peek"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.stacks.Stack.peek" title="Link to this definition">¶</a></dt>
<dd><p>Peek.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ufl.utils.stacks.Stack.push">
<span class="sig-name descname"><span class="pre">push</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/stacks.html#Stack.push"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.stacks.Stack.push" title="Link to this definition">¶</a></dt>
<dd><p>Push.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ufl.utils.stacks.StackDict">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ufl.utils.stacks.</span></span><span class="sig-name descname"><span class="pre">StackDict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/stacks.html#StackDict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.stacks.StackDict" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>A dictionary type.</p>
<p>A dict that can be changed incrementally with ‘d.push(k,v)’ and have
changes rolled back with ‘k,v = d.pop()’.</p>
<dl class="py method">
<dt class="sig sig-object py" id="ufl.utils.stacks.StackDict.pop">
<span class="sig-name descname"><span class="pre">pop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/stacks.html#StackDict.pop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.stacks.StackDict.pop" title="Link to this definition">¶</a></dt>
<dd><p>Restore previous state for this key.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ufl.utils.stacks.StackDict.push">
<span class="sig-name descname"><span class="pre">push</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ufl/utils/stacks.html#StackDict.push"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ufl.utils.stacks.StackDict.push" title="Link to this definition">¶</a></dt>
<dd><p>Store previous state for this key.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-ufl.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-ufl.utils" title="Link to this heading">¶</a></h2>
<p>Utilities.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Unified Form Language (UFL)</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual.html">User manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="ufl.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Release notes</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="ufl.html">ufl package</a><ul>
      <li>Previous: <a href="ufl.formatting.html" title="previous chapter">ufl.formatting package</a></li>
      <li>Next: <a href="../releases.html" title="next chapter">Release notes</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, FEniCS Project.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/api-doc/ufl.utils.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>