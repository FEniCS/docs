<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DOLFINx: dolfinx::graph::build Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DOLFINx
   &#160;<span id="projectnumber">0.5.2</span>
   </div>
   <div id="projectbrief">DOLFINx C++ interface</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>dolfinx</b></li><li class="navelem"><a class="el" href="../../d9/d69/namespacedolfinx_1_1graph.html">graph</a></li><li class="navelem"><a class="el" href="../../d1/d52/namespacedolfinx_1_1graph_1_1build.html">build</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dolfinx::graph::build Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Tools for distributed graphs.  
<a href="../../d1/d52/namespacedolfinx_1_1graph_1_1build.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acaec57499e623c18ef20134c4532163e"><td class="memItemLeft" align="right" valign="top">std::tuple&lt; <a class="el" href="../../df/d84/classdolfinx_1_1graph_1_1AdjacencyList.html">graph::AdjacencyList</a>&lt; std::int64_t &gt;, std::vector&lt; int &gt;, std::vector&lt; std::int64_t &gt;, std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d52/namespacedolfinx_1_1graph_1_1build.html#acaec57499e623c18ef20134c4532163e">distribute</a> (MPI_Comm comm, const <a class="el" href="../../df/d84/classdolfinx_1_1graph_1_1AdjacencyList.html">graph::AdjacencyList</a>&lt; std::int64_t &gt; &amp;list, const <a class="el" href="../../df/d84/classdolfinx_1_1graph_1_1AdjacencyList.html">graph::AdjacencyList</a>&lt; std::int32_t &gt; &amp;destinations)</td></tr>
<tr class="memdesc:acaec57499e623c18ef20134c4532163e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Distribute adjacency list nodes to destination ranks.  <a href="../../d1/d52/namespacedolfinx_1_1graph_1_1build.html#acaec57499e623c18ef20134c4532163e">More...</a><br /></td></tr>
<tr class="separator:acaec57499e623c18ef20134c4532163e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95811012572f0dc50fed60a37b05b232"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::int64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d52/namespacedolfinx_1_1graph_1_1build.html#a95811012572f0dc50fed60a37b05b232">compute_ghost_indices</a> (MPI_Comm comm, const std::span&lt; const std::int64_t &gt; &amp;owned_indices, const std::span&lt; const std::int64_t &gt; &amp;ghost_indices, const std::span&lt; const int &gt; &amp;ghost_owners)</td></tr>
<tr class="memdesc:a95811012572f0dc50fed60a37b05b232"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take a set of distributed input global indices, including ghosts, and determine the new global indices after remapping.  <a href="../../d1/d52/namespacedolfinx_1_1graph_1_1build.html#a95811012572f0dc50fed60a37b05b232">More...</a><br /></td></tr>
<tr class="separator:a95811012572f0dc50fed60a37b05b232"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80479e0d22a8e992037ba419d971c61a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::int64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d52/namespacedolfinx_1_1graph_1_1build.html#a80479e0d22a8e992037ba419d971c61a">compute_local_to_global_links</a> (const <a class="el" href="../../df/d84/classdolfinx_1_1graph_1_1AdjacencyList.html">graph::AdjacencyList</a>&lt; std::int64_t &gt; &amp;global, const <a class="el" href="../../df/d84/classdolfinx_1_1graph_1_1AdjacencyList.html">graph::AdjacencyList</a>&lt; std::int32_t &gt; &amp;local)</td></tr>
<tr class="memdesc:a80479e0d22a8e992037ba419d971c61a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given an adjacency list with global, possibly non-contiguous, link indices and a local adjacency list with contiguous link indices starting from zero, compute a local-to-global map for the links. Both adjacency lists must have the same shape.  <a href="../../d1/d52/namespacedolfinx_1_1graph_1_1build.html#a80479e0d22a8e992037ba419d971c61a">More...</a><br /></td></tr>
<tr class="separator:a80479e0d22a8e992037ba419d971c61a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5f1a3c2745a7010820b333ed8c3f0fe"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::int32_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d52/namespacedolfinx_1_1graph_1_1build.html#aa5f1a3c2745a7010820b333ed8c3f0fe">compute_local_to_local</a> (const std::span&lt; const std::int64_t &gt; &amp;local0_to_global, const std::span&lt; const std::int64_t &gt; &amp;local1_to_global)</td></tr>
<tr class="memdesc:aa5f1a3c2745a7010820b333ed8c3f0fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute a local0-to-local1 map from two local-to-global maps with common global indices.  <a href="../../d1/d52/namespacedolfinx_1_1graph_1_1build.html#aa5f1a3c2745a7010820b333ed8c3f0fe">More...</a><br /></td></tr>
<tr class="separator:aa5f1a3c2745a7010820b333ed8c3f0fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Tools for distributed graphs. </p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000005">Todo:</a></b></dt><dd>Add a function that sends data to the 'owner' </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a95811012572f0dc50fed60a37b05b232"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95811012572f0dc50fed60a37b05b232">&#9670;&nbsp;</a></span>compute_ghost_indices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::int64_t &gt; compute_ghost_indices </td>
          <td>(</td>
          <td class="paramtype">MPI_Comm&#160;</td>
          <td class="paramname"><em>comm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::span&lt; const std::int64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>owned_indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::span&lt; const std::int64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>ghost_indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::span&lt; const int &gt; &amp;&#160;</td>
          <td class="paramname"><em>ghost_owners</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take a set of distributed input global indices, including ghosts, and determine the new global indices after remapping. </p>
<p>Each rank receive 'input' global indices <code>[i0, i1, ..., i(m-1), im, ..., i(n-1)]</code>, where the first <code>m</code> indices are owned by the caller and the remained are 'ghosts' indices that are owned by other ranks.</p>
<p>Each rank assigns new global indices to its owned indices. The new index is the rank offset (scan of the number of indices owned by the lower rank processes, typically computed using <code>MPI_Exscan</code> with <code>MPI_SUM</code>), i.e. <code>i1 -&gt; offset + 1</code>, <code>i2 -&gt; offset + 2</code>, etc. Ghost indices are number by the remote owning processes. The function returns the new ghost global indices but retrieving the new indices from the owning ranks.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">comm</td><td><a class="el" href="../../da/dfe/namespacedolfinx_1_1MPI.html" title="MPI support functionality.">MPI</a> communicator </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">owned_indices</td><td>List of owned global indices. It should not contain duplicates, and these indices must now appear in <code>owned_indices</code> on other ranks. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ghost_indices</td><td>List of ghost global indices. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ghost_owners</td><td>The owning rank for each entry in <code>ghost_indices</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>New global indices for the ghost indices. </dd></dl>

</div>
</div>
<a id="a80479e0d22a8e992037ba419d971c61a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80479e0d22a8e992037ba419d971c61a">&#9670;&nbsp;</a></span>compute_local_to_global_links()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::int64_t &gt; compute_local_to_global_links </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../df/d84/classdolfinx_1_1graph_1_1AdjacencyList.html">graph::AdjacencyList</a>&lt; std::int64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>global</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d84/classdolfinx_1_1graph_1_1AdjacencyList.html">graph::AdjacencyList</a>&lt; std::int32_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>local</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given an adjacency list with global, possibly non-contiguous, link indices and a local adjacency list with contiguous link indices starting from zero, compute a local-to-global map for the links. Both adjacency lists must have the same shape. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">global</td><td>Adjacency list with global link indices </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local</td><td>Adjacency list with local, contiguous link indices </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Map from local index to global index, which if applied to the local adjacency list indices would yield the global adjacency list </dd></dl>

</div>
</div>
<a id="aa5f1a3c2745a7010820b333ed8c3f0fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5f1a3c2745a7010820b333ed8c3f0fe">&#9670;&nbsp;</a></span>compute_local_to_local()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::int32_t &gt; compute_local_to_local </td>
          <td>(</td>
          <td class="paramtype">const std::span&lt; const std::int64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>local0_to_global</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::span&lt; const std::int64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>local1_to_global</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute a local0-to-local1 map from two local-to-global maps with common global indices. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">local0_to_global</td><td>Map from local0 indices to global indices </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local1_to_global</td><td>Map from local1 indices to global indices </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Map from local0 indices to local1 indices </dd></dl>

</div>
</div>
<a id="acaec57499e623c18ef20134c4532163e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaec57499e623c18ef20134c4532163e">&#9670;&nbsp;</a></span>distribute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::tuple&lt; <a class="el" href="../../df/d84/classdolfinx_1_1graph_1_1AdjacencyList.html">graph::AdjacencyList</a>&lt; std::int64_t &gt;, std::vector&lt; int &gt;, std::vector&lt; std::int64_t &gt;, std::vector&lt; int &gt; &gt; distribute </td>
          <td>(</td>
          <td class="paramtype">MPI_Comm&#160;</td>
          <td class="paramname"><em>comm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d84/classdolfinx_1_1graph_1_1AdjacencyList.html">graph::AdjacencyList</a>&lt; std::int64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d84/classdolfinx_1_1graph_1_1AdjacencyList.html">graph::AdjacencyList</a>&lt; std::int32_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>destinations</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Distribute adjacency list nodes to destination ranks. </p>
<p>The global index of each node is assumed to be the local index plus the offset for this rank.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">comm</td><td><a class="el" href="../../da/dfe/namespacedolfinx_1_1MPI.html" title="MPI support functionality.">MPI</a> Communicator </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">list</td><td>The adjacency list to distribute </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">destinations</td><td>Destination ranks for the ith node in the adjacency list. The first rank is the 'owner' of the node. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ol type="1">
<li>Received adjacency list for this process</li>
<li>Source ranks for each node in the adjacency list</li>
<li>Original global index for each node in the adjacency list</li>
<li>Owner rank of ghost nodes </li>
</ol>
</dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
